Package: liblmdb-dev
Version: 0.9.22
Revision: 1.1
###
BuildDepends: <<
	fink (>= 0.45.99.git),
	debhelper (>= 9),
	quilt,
	doxygen
<<
Depends: <<
	liblmdb0 (= %v-%r)
<<
Recommends: lmdb-doc
###
Source: mirror:debian:pool/main/l/lmdb/lmdb_%v.orig.tar.gz
Source-Checksum: SHA256(f3927859882eb608868c8c31586bb7eb84562a40a6bf5cc3e13b6b564641ea28)
Source2: mirror:debian:pool/main/l/lmdb/lmdb_%v-1.debian.tar.xz
Source2-Checksum: SHA256(575f46a5f3207639195831788992626d89bab7f236f984eacea03be380c8404f)
SourceDirectory: lmdb-LMDB_%v
Source2ExtractDir: lmdb-LMDB_%v
###
DefaultScript: debhelper
PatchScript: <<
%{default_script}

# Fix patch path
perl -pi -e 's,%p/local,/usr/local,g' debian/patches/0001-Debian-quirks-to-make-shared-library-versioned.patch

# Differences with so and dylib
perl -pi -e 's,\$\(SOEXT\)\.\$\(SOVER\)\.0\.0,.\$(SOVER).0.0\$(SOEXT),g' debian/patches/0001-Debian-quirks-to-make-shared-library-versioned.patch
perl -pi -e 's,\$\(SOEXT\)\.\$\(SOVER\),.\$(SOVER)\$(SOEXT),g' debian/patches/0001-Debian-quirks-to-make-shared-library-versioned.patch
perl -pi -e 's,\$\@\.\$\(SOVER\)\.0\.0,liblmdb.\$(SOVER)\$(SOEXT),g' debian/patches/0001-Debian-quirks-to-make-shared-library-versioned.patch
perl -pi -e 's,liblmdb\.\$\(SOVER\)\$\(SOEXT\) liblmdb\.\$\(SOVER\)\$\(SOEXT\),liblmdb.\$(SOVER)\$(SOEXT) liblmdb.\$(SOVER).0.0\$(SOEXT),g' debian/patches/0001-Debian-quirks-to-make-shared-library-versioned.patch
perl -pi -e 's,-soname,-install_name,g' debian/patches/0001-Debian-quirks-to-make-shared-library-versioned.patch
perl -pi -e 's;-pthread -Wl,-Bsymbolic;-pthread;g' debian/patches/0001-Debian-quirks-to-make-shared-library-versioned.patch
perl -pi -e 's,liblmdb\.so,liblmdb.dylib,g' debian/liblmdb-dev.install
perl -pi -e 's,liblmdb\.so\.\*,liblmdb.*.dylib,g' debian/liblmdb0.install

dh_quilt_patch

perl -pi -e 's,\.so,.dylib,g' libraries/liblmdb/Makefile
<<
###
SplitOff: <<
	Package: lmdb-utils
	Description: Lightning Memory-Mapped Database Utilities
	DescDetail: <<
This package provides tools for manipulating LMDB databases:
 * mdb_stat - LMDB environment status tool
 * mdb_copy - LMDB environment copy tool
.
Lighting Memory-Mapped Database (LMDB) is an ultra-fast, ultra-compact
key-value embedded data store developed for the OpenLDAP Project.  It uses
memory-mapped files, so it has the read performance of a pure in-memory
database while still offering the persistence of standard disk-based
databases, and is only limited to the size of the virtual address space, (it
is not limited to the size of physical RAM).
	<<
<<
SplitOff2: <<
	Package: liblmdb0
	Description: Lightning Memory-Mapped Database shared library
	DescDetail: <<
This package contains the LMDB shared library.
.
Lighting Memory-Mapped Database (LMDB) is an ultra-fast, ultra-compact
key-value embedded data store developed for the OpenLDAP Project.  It uses
memory-mapped files, so it has the read performance of a pure in-memory
database while still offering the persistence of standard disk-based
databases, and is only limited to the size of the virtual address space, (it
is not limited to the size of physical RAM).
	<<
<<
SplitOff3: <<
	Package: lmdb-doc
#	Breaks: liblmdb-dev (<< 0.9.9-1)
	Replaces: liblmdb-dev (<< 0.9.9-1)
	Description: Lightning Memory-Mapped Database doxygen documentation
	DescDetail: <<
This package contains the doxygen generated documentation and the man
pages for the LMDB library.
.
Lighting Memory-Mapped Database (LMDB) is an ultra-fast, ultra-compact
key-value embedded data store developed for the OpenLDAP Project.  It uses
memory-mapped files, so it has the read performance of a pure in-memory
database while still offering the persistence of standard disk-based
databases, and is only limited to the size of the virtual address space, (it
is not limited to the size of physical RAM).
	<<
<<
###
Description: Lightning Memory-Mapped Database development files
DescDetail: <<
This package contains the development libraries, header files.  Install
lmdb-doc package for man pages.
.
Lighting Memory-Mapped Database (LMDB) is an ultra-fast, ultra-compact
key-value embedded data store developed for the OpenLDAP Project.  It uses
memory-mapped files, so it has the read performance of a pure in-memory
database while still offering the persistence of standard disk-based
databases, and is only limited to the size of the virtual address space, (it
is not limited to the size of physical RAM).
<<
###
License: Restrictive/Distributable
Homepage: http://symas.com/mdb/
Maintainer: Justin F. Hallett <thesin@users.sourceforge.net>

