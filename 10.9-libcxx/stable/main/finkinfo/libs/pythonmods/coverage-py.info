# -*- coding: ascii; tab-width: 4 -*-
Info4: <<

Package: coverage-py%type_pkg[python]
Version: 4.5.1
Revision: 1

Homepage: https://pypi.org/project/coverage/
Maintainer: Kurt Schwehr <goatbar@users.sourceforge.net>
Type: python (2.7 3.4 3.5 3.6 3.7)
Depends: python%type_pkg[python]
BuildDepends: setuptools-tng-py%type_pkg[python]
Source: https://pypi.io/packages/source/c/coverage/coverage-%v.tar.gz
Source-Checksum: SHA256(56e448f051a201c5ebbaa86a5efd0ca90d327204d8b059ab25ad0f35fbfd79f1)
SourceRename: coverage-%v.tar.gz

CompileScript: <<
  python%type_raw[python] setup.py build 
<<

# tox will download and pip-install a gazillion of extra deps, even those already installed as packages.
# Tests are passing, but 11 failures with Python 3.7.
InfoTest: <<
	#TestDepends: <<
	#	tox-py%type_pkg[python], gevent-py%type_pkg[python], greenlet-py%type_pkg[python], mock-py%type_pkg[python]
	#<<
	TestScript: <<
		#!/bin/bash -ev
		if [ $(fink list -i tox-py%type_pkg[python] | wc -l) -lt 1 ]; then
			echo "Warning: unable to run tests without package tox-py%type_pkg[python] installed!"
			exit 1
		fi
		%p/bin/tox-py%type_pkg[python] -e py%type_pkg[python]
		if [ $? -gt 0 -a %type_pkg[python] -lt 37 ]; then
			echo "Error: unexpected test failures under Python %type_raw[python]!"
			exit 2
		fi
	<<
<<

InstallScript: <<
  python%type_raw[python] setup.py install --root=%d
  mv %i/bin/coverage %i/bin/coverage%type_raw[python]
  rm %i/bin/coverage[23] %i/bin/coverage-*
<<

PostInstScript: <<
 update-alternatives --verbose --install %p/bin/coverage coverage %p/bin/coverage%type_raw[python] %type_pkg[python] 
<<

PreRmScript: <<
 update-alternatives --verbose --remove coverage %p/bin/coverage%type_raw[python]
<<

DocFiles: CHANGES.rst MANIFEST.in PKG-INFO README.rst CONTRIBUTORS.txt

License: BSD
Description: Python code coverage for testing
DescDetail: <<
Coverage.py measures code coverage, typically during test
execution. It uses the code analysis tools and tracing hooks provided
in the Python standard library to determine which lines are
executable, and which have been executed.
<<

DescPackaging: <<
 Needs tox to run tests and tox needs pytest/coverage; test script running
 depending on installation status of tox-py%type_pkg[python].
<<


# Info4
<<
