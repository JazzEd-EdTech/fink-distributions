Package: libical-shlibs
Version: 0.48
Revision: 3
Description: C/C++ support for the iCalendar format
License: LGPL
Maintainer: Jack Fink <jackfink@users.sourceforge.net>
BuildDepends: <<
	fink-package-precedence
<<
Source: mirror:sourceforge:freeassociation/libical-%v.tar.gz
Source-MD5: e549f434d5fbf9cd156c60ed4943618f
PatchFile: %n.patch
PatchFile-MD5: c97896c4f47c24ff6614ae244db2e16a
PatchScript: <<
	%{default_script}
	# Patch configure to not link like Puma on Yosemite 
	perl -pi.bak -e 's|10\.\[012\]\*|10.[012][,.]*|g' configure
<<
SetCFLAGS: -Os
SetCXXFLAGS: -Os
ConfigureParams: <<
	--mandir=%p/share/man \
	--enable-dependency-tracking \
	--enable-reentrant \
	--enable-cxx \
	--disable-python \
	--disable-static
<<
GCC: 4.0
CompileScript: <<
	%{default_script}
	fink-package-precedence --prohibit-bdep=libical .
<<
# Tests hang on TimeZone Conversions test, but keep field here as reminder
#InfoTest: <<
#	TestScript: make check || exit 2
#<<
InstallScript: make install DESTDIR=%d
Shlibs: <<
	%p/lib/libical.0.dylib 49.0.0 %n (>= 0.48-1)
	%p/lib/libical_cxx.0.dylib 1.0.0 %n (>= 0.48-1)
	%p/lib/libicalss.0.dylib 49.0.0 %n (>= 0.48-1)
	%p/lib/libicalss_cxx.0.dylib 1.0.0 %n (>= 0.48-1)
	%p/lib/libicalvcal.0.dylib 49.0.0 %n (>= 0.48-1)
<<
DocFiles: COPYING
Splitoff: <<
	Package: libical
	Depends: %N (= %v-%r)
	BuildDependsOnly: true
	Conflicts: libical, libical3
	Replaces: libical, libical3
	Files: <<
		include
		lib/pkgconfig
		lib/libical.{dylib,la}
		lib/libical_cxx.{dylib,la}
		lib/libicalss.{dylib,la}
		lib/libicalss_cxx.{dylib,la}
		lib/libicalvcal.{dylib,la}
		share/libical
	<<
	DocFiles: AUTHORS COPYING ChangeLog LICENSE NEWS README* TEST THANKS TODO
<<
Homepage: http://libical.github.io/libical/
DescPackaging: <<
Python is disabled.  If the python bindings that go atop the dylibs are needed,
a new .info that copies the same settings as this one and then removes everything 
but the bindings should be created (or the build system hacked to use the installed
dylibs rather than compiling a new).
<<
