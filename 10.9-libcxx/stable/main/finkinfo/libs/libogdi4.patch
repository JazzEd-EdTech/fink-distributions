diff -Nurd ogdi-4.1.0.orig/config/common.mak.in ogdi-4.1.0/config/common.mak.in
--- ogdi-4.1.0.orig/config/common.mak.in	2019-04-20 13:00:51.000000000 +0100
+++ ogdi-4.1.0/config/common.mak.in	2020-12-08 19:36:06.000000000 +0000
@@ -76,7 +76,7 @@
 #	Final OS installation location.
 #
 ifndef prefix
-prefix		= /usr/local
+prefix		= @PREFIX@
 endif
 exec_prefix 	= ${prefix}
 INST_INCLUDE	= ${prefix}/include
diff -Nurd ogdi-4.1.0.orig/config/darwin.mak ogdi-4.1.0/config/darwin.mak
--- ogdi-4.1.0.orig/config/darwin.mak	2019-04-20 13:00:51.000000000 +0100
+++ ogdi-4.1.0/config/darwin.mak	2020-12-08 19:36:06.000000000 +0000
@@ -33,7 +33,7 @@
 SHLIB_CFLAGS	= -fno-common
 COMMON_CFLAGS	= $(OPTIMIZATION) -fno-common
 
-SHLIB_LDFLAGS	= -dynamiclib
+SHLIB_LDFLAGS	= -dynamiclib -compatibility_version 4.1.0 -current_version 4.1.0
 COMMON_LDFLAGS  = $(OPTIMIZATION)
 
 
@@ -62,5 +62,5 @@
 	
 $(DYNAGEN): $(OBJECTS)
 	@echo Making shared library: $@
-	$(SHLIB_LD) $(SHLIB_LDFLAGS) $(COMMON_LDFLAGS) -o $@ $^ $(LINK_LIBS) 
+	$(SHLIB_LD) $(SHLIB_LDFLAGS) -install_name $(INST_LIB)/ogdi/$(notdir $@) $(COMMON_LDFLAGS) -o $@ $^ $(LINK_LIBS) 
 	@echo $@ made successfully ...
diff -Nurd ogdi-4.1.0.orig/config/generic.mak.in ogdi-4.1.0/config/generic.mak.in
--- ogdi-4.1.0.orig/config/generic.mak.in	2019-04-20 13:00:51.000000000 +0100
+++ ogdi-4.1.0/config/generic.mak.in	2020-12-08 19:47:40.000000000 +0000
@@ -37,9 +37,14 @@
 SHLIB_CFLAGS	= @C_PIC@
 COMMON_CFLAGS	= $(OPTIMIZATION) @CFLAGS@ @C_WFLAGS@ -DUNIX=1 @C_PIC@ @RPC_CFLAGS@
 
-SHLIB_LDFLAGS	= -shared 
+SHLIB_LDFLAGS	= -dynamiclib -compatibility_version 4.1.0 -current_version 4.1.0
 COMMON_LDFLAGS  = $(OPTIMIZATION) @LDFLAGS@
 
+#
+# File name extensions
+#
+SHLIB_EXT	= dylib
+
 RPC_INCLUDES = @RPC_INCLUDES@
 
 UCB_STATICLIB = 
@@ -59,8 +64,7 @@
 #
 # platform specific file locations
 #
-#RPC_LINKLIB	= -lrpcsvc -lnsl -lsocket
-#RPC_LINKLIB	=	-ldl -ldbmalloc
+RPC_INCLUDES	=	-DHAVE_STD_RPC_INCLUDES
 RPC_LINKLIB	=	@LIBS@ @RPC_LIBS@
 
 #
@@ -97,3 +101,17 @@
 
 # Iconv
 HAVE_ICONV=@HAVE_ICONV@
+
+#
+# make rules
+#
+$(ARCHGEN): $(OBJECTS)
+	@echo Making archive file: $@
+	$(AR) $@ $^ 
+	ranlib $@
+	@echo $@ made successfully ...
+	
+$(DYNAGEN): $(OBJECTS)
+	@echo Making shared library: $@
+	$(SHLIB_LD) $(SHLIB_LDFLAGS) -install_name $(INST_LIB)/ogdi/$(notdir $@) $(COMMON_LDFLAGS) -o $@ $^ $(LINK_LIBS) 
+	@echo $@ made successfully ...
diff -Nurd ogdi-4.1.0.orig/configure ogdi-4.1.0/configure
--- ogdi-4.1.0.orig/configure	2019-04-20 13:00:51.000000000 +0100
+++ ogdi-4.1.0/configure	2020-12-08 19:36:06.000000000 +0000
@@ -4044,8 +4044,8 @@
     as_fn_error $? "Unable to find $with_zlib/include/zlib.h" "$LINENO" 5
   fi
 
-  if test -r $with_zlib/lib/libz.so ; then
-    ZLIB_LIB=$with_zlib/lib/libz.so
+  if test -r $with_zlib/lib/libz.dylib ; then
+    ZLIB_LIB=$with_zlib/lib/libz.dylib
     { $as_echo "$as_me:${as_lineno-$LINENO}: result: checking for $ZLIB_LIB ... found" >&5
 $as_echo "checking for $ZLIB_LIB ... found" >&6; }
 
@@ -4054,8 +4054,8 @@
     { $as_echo "$as_me:${as_lineno-$LINENO}: result: checking for $ZLIB_LIB ... found" >&5
 $as_echo "checking for $ZLIB_LIB ... found" >&6; }
 
-  elif test -r $with_zlib/libz.so ; then
-    ZLIB_LIB=$with_zlib/libz.so
+  elif test -r $with_zlib/libz.dylib ; then
+    ZLIB_LIB=$with_zlib/libz.dylib
     { $as_echo "$as_me:${as_lineno-$LINENO}: result: checking for $ZLIB_LIB ... found" >&5
 $as_echo "checking for $ZLIB_LIB ... found" >&6; }
 
@@ -4065,7 +4065,7 @@
 $as_echo "checking for $ZLIB_LIB ... found" >&6; }
 
   else
-    as_fn_error $? "Unable to find $with_zlib/{lib/,}libz.{so,a}" "$LINENO" 5
+    as_fn_error $? "Unable to find $with_zlib/{lib/,}libz.{dylib,a}" "$LINENO" 5
   fi
 
   ZLIB_SETTING=external
@@ -4208,16 +4208,16 @@
     as_fn_error $? "Unable to find $with_expat/include/expat.h" "$LINENO" 5
   fi
 
-  if test -r $with_expat/lib/libexpat.so ; then
-    EXPAT_LIB=$with_expat/lib/libexpat.so
+  if test -r $with_expat/lib/libexpat.dylib ; then
+    EXPAT_LIB=$with_expat/lib/libexpat.dylib
     echo "checking for $EXPAT_LIB ... found"
 
   elif test -r $with_expat/lib/libexpat.a ; then
     EXPAT_LIB=$with_expat/lib/libexpat.a
     echo "checking for $EXPAT_LIB ... found"
 
-  elif test -r $with_expat/libexpat.so ; then
-    EXPAT_LIB=$with_expat/libexpat.so
+  elif test -r $with_expat/libexpat.dylib ; then
+    EXPAT_LIB=$with_expat/libexpat.dylib
     echo "checking for $EXPAT_LIB ... found"
 
   elif test -r $with_expat/libexpat.a ; then
@@ -4225,7 +4225,7 @@
     echo "checking for $EXPAT_LIB ... found"
 
   else
-    as_fn_error $? "Unable to find $with_expat/{lib/,}libexpat.{so,a}" "$LINENO" 5
+    as_fn_error $? "Unable to find $with_expat/{lib/,}libexpat.{dylib,a}" "$LINENO" 5
   fi
 
   EXPAT_SETTING=external
diff -Nurd ogdi-4.1.0.orig/include/Linux/ogdi_macro.h ogdi-4.1.0/include/Linux/ogdi_macro.h
--- ogdi-4.1.0.orig/include/Linux/ogdi_macro.h	2019-04-20 13:00:51.000000000 +0100
+++ ogdi-4.1.0/include/Linux/ogdi_macro.h	2020-12-08 19:36:06.000000000 +0000
@@ -1,6 +1,6 @@
 #include <signal.h>
-#include <wait.h>
-#include <rpc/xdr.h>
+#include <sys/wait.h>
+/*#include <rpc/xdr.h>*/
 #include <stdio.h>
 
 #define ogdi_IXDR_PUT_LONG(buf, v) { \
diff -Nurd ogdi-4.1.0.orig/ogdi/c-api/ecs_dyna.c ogdi-4.1.0/ogdi/c-api/ecs_dyna.c
--- ogdi-4.1.0.orig/ogdi/c-api/ecs_dyna.c	2019-04-20 13:00:51.000000000 +0100
+++ ogdi-4.1.0/ogdi/c-api/ecs_dyna.c	2020-12-08 19:36:06.000000000 +0000
@@ -107,13 +107,13 @@
   free(temp);
 
   if (handle == NULL) {
-    /* Try with the .so extension */
+    /* Try with the .dylib extension */
 
-    if ((temp = (char *) malloc(strlen(libname)+7)) == NULL)
+    if ((temp = (char *) malloc(strlen(libname)+10)) == NULL)
       return NULL;
     strcpy(temp,"lib");
     strcat(temp,libname);
-    strcat(temp,".so");
+    strcat(temp,".dylib");
 
     handle = dlopen(temp,RTLD_LAZY);
 #ifdef notdef
diff -Nurd ogdi-4.1.0.orig/ogdi/driver/rpf/rpf.h ogdi-4.1.0/ogdi/driver/rpf/rpf.h
--- ogdi-4.1.0.orig/ogdi/driver/rpf/rpf.h	2019-04-20 13:00:51.000000000 +0100
+++ ogdi-4.1.0/ogdi/driver/rpf/rpf.h	2020-12-08 19:36:06.000000000 +0000
@@ -74,7 +74,7 @@
 typedef unsigned short ushort;
 typedef unsigned long  uint;
 */
-typedef unsigned char  bool;
+typedef unsigned char  bbool;
 typedef unsigned char  uchar;
 typedef unsigned char* ucharp;
 typedef char           ascii;
@@ -136,7 +136,7 @@
 
 typedef struct header
 {
-  bool     endian;
+  bbool     endian;
   ushort   hdr_sec_len;       /* header section length */
   ascii    filename[12];
   uchar    new;
@@ -352,8 +352,8 @@
 
 typedef struct display1
 {
-  bool      all_subframes;
-  bool      no_transparent;
+  bbool      all_subframes;
+  bbool      no_transparent;
   ushort    subframe_seq_length;
   ushort    transparent_seq_length;
   uint      image_rows;
@@ -377,7 +377,7 @@
   RPF_image    img;
   Attribute    att;
   Replace      repupd;
-  bool         all_subframes;
+  bbool         all_subframes;
   int         NITF_hdr_len;
 } Frame_file;
 
diff -Nurd ogdi-4.1.0.orig/vpflib/reduce2.c ogdi-4.1.0/vpflib/reduce2.c
--- ogdi-4.1.0.orig/vpflib/reduce2.c	2019-04-20 13:00:51.000000000 +0100
+++ ogdi-4.1.0/vpflib/reduce2.c	2020-12-08 19:36:06.000000000 +0000
@@ -11,8 +11,8 @@
 #include "reduce2.h"
 #endif
 
-//#define  MAX(m,n) (((m) > (n)) ? (m) : (n))
-//#define  MIN(m,n) (((m) < (n)) ? (m) : (n))
+#define  MAX(m,n) (((m) > (n)) ? (m) : (n))
+#define  MIN(m,n) (((m) < (n)) ? (m) : (n))
 #define  DOCNT(i,t,n)   (_d_l=n, (_d_m=(t-(i)+_d_l)/_d_l) > 0 ? _d_m : 0L )
 
 /*    General purpose tools for polyline reduction:
