Package: libogdi4
Version: 4.1.0
Revision: 1
Description: OGDI - Open Geographic Datastore Interface
License: BSD
Homepage: http://ogdi.sourceforge.net
Maintainer: BABA Yoshihiko <babayoshihiko@mac.com>
DescDetail: <<
 an application programming interface (API) that uses a standardized 
access methods to work in conjunction with GIS software packages 
(the application) and various geospatial data products.
<<

# Dependencies.
Depends: <<
	%n-shlibs (=%v-%r),
	expat1-shlibs
<<
BuildDepends: <<
	expat1,
	fink (>= 0.30.0)
<<
BuildDependsOnly: true
BuildConflicts: libogdi3, libogdi4
Conflicts: libogdi3
Replaces: libogdi3

# Unpack Phase.
Source: mirror:sourceforge:/ogdi/ogdi-%v.tar.gz
Source-MD5: 0e6259d55694f90b2099bbd901bdb161

# Patch Phase.
PatchFile: %n.patch
PatchFile-MD5: 2911c78fee7b728ad7e14ec4ca7012e6
# Compile Phase.
GCC: 4.0
ConfigureParams: <<
	--with-expat=%p --with-expatlib="-L%p/lib -lexpat" \
	--with-zlib
<<
UseMaxBuildJobs: False
CompileScript: <<
#!/bin/sh -xe
  export TOPDIR=%b
  export TARGET=darwin
  ./configure %c
  ln -s Linux include/$TARGET
  make prefix=%p
<<

# Install Phase.
InstallScript: <<
#!/bin/sh -xe
  export TOPDIR=%b
  export TARGET=darwin
  make install exec_prefix=%i INST_INCLUDE=%i/include
  mkdir -p %i/share/doc/%n
  mv %i/bin/example* %i/share/doc/%n
<<
DocFiles: ChangeLog HOWTO-RELEASE LICENSE NEWS README README-BIN.TXT

# Additional Phase.
SplitOff: <<
	Package: %N-shlibs
	Depends: expat1-shlibs
	Description: Shared libraries for OGDI package
	Files: <<
		lib/ogdi/libadrg.dylib
		lib/ogdi/libogdi.dylib
		lib/ogdi/libremote.dylib
		lib/ogdi/librpf.dylib
		lib/ogdi/libskeleton.dylib
		lib/ogdi/libvrf.dylib
<<
	Shlibs:<<
		%p/lib/ogdi/libadrg.dylib			4.1.0 %n (>=4.1.0-1)
		%p/lib/ogdi/libogdi.dylib			4.1.0 %n (>=4.1.0-1)
		%p/lib/ogdi/libremote.dylib			4.1.0 %n (>=4.1.0-1)
		%p/lib/ogdi/librpf.dylib				4.1.0 %n (>=4.1.0-1)
		%p/lib/ogdi/libskeleton.dylib		4.1.0 %n (>=4.1.0-1)
		%p/lib/ogdi/libvrf.dylib				4.1.0 %n (>=4.1.0-1)
<<
	DocFiles: ChangeLog HOWTO-RELEASE LICENSE NEWS README README-BIN.TXT
<<
SplitOff2: <<
  Package: %N-bin
  Depends: %N-shlibs (= %v-%r)
  Conflicts: libogdi3-bin
  Replaces: libogdi3-bin
  Files:  bin/gltpd bin/ogdi_*
  Description: Executables for OGDI package
  DocFiles: ChangeLog HOWTO-RELEASE LICENSE NEWS README README-BIN.TXT
<<
