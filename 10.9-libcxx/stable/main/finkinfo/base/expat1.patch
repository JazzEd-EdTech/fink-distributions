diff -Nurd -x'*~' expat-2.2.1.orig/configure expat-2.2.1/configure
--- expat-2.2.1.orig/configure	2017-06-17 14:21:24.000000000 -0400
+++ expat-2.2.1/configure	2017-06-20 13:14:40.000000000 -0400
@@ -16341,7 +16341,7 @@
   }
 
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"; then :
 
 
 $as_echo "#define HAVE_GETRANDOM 1" >>confdefs.h
@@ -16386,7 +16386,8 @@
     conftest$ac_exeext conftest.$ac_ext
 
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext \
+    conftest$ac_exeext conftest.$ac_ext
 
 
 for ac_header in fcntl.h unistd.h
