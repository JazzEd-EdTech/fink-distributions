diff -ruN recode-3.7-orig/lib/hash.h recode-3.7/lib/hash.h
--- recode-3.7-orig/lib/hash.h	2018-01-14 16:00:06.000000000 -0600
+++ recode-3.7/lib/hash.h	2018-01-31 23:15:51.000000000 -0600
@@ -21,6 +21,11 @@
 /* Make sure USE_OBSTACK is defined to 1 if you want the allocator to use
    obstacks instead of malloc, and recompile 'hash.c' with same setting.  */
 
+#define hash_lookup recode_hash_lookup
+#define hash_delete recode_hash_delete
+#define hash_free   recode_hash_free
+#define hash_insert recode_hash_insert
+
 #ifndef HASH_H_
 # define HASH_H_
 
diff -ruN recode-3.7-orig/src/Makefile.in recode-3.7/src/Makefile.in
--- recode-3.7-orig/src/Makefile.in	2018-01-30 14:56:08.000000000 -0600
+++ recode-3.7/src/Makefile.in	2018-01-31 23:13:22.000000000 -0600
@@ -1471,7 +1471,7 @@
 names.c outer.c recode.c request.c strip-pool.c task.c $(ALL_STEPS) \
 $(include_HEADERS) $(noinst_HEADERS) $(H_STEPS)
 
-librecode_la_LDFLAGS = -version-info 0:0:0
+librecode_la_LDFLAGS = -version-info 0:0:0 -no-undefined
 librecode_la_LIBADD = ../lib/libgnu.la libmerged.la
 libmerged_la_SOURCES = merged.c
 libmerged_la_CPPFLAGS = $(NON_WARN_CFLAGS)
