Package: recode
Version: 3.7
Revision: 1
Description: Convert files between various charsets
License: GPL3/LGPL
Maintainer: None <fink-devel@lists.sourceforge.net>
Source: https://github.com/rrthomas/recode/releases/download/v%v/%n-%v.tar.gz
Source-MD5: 581924dd4ff31ceb2d96654c1ba0cc8b
Depends: <<
	%N-shlibs (>= %v-%r),
	libgettext8-shlibs,
	libiconv
<<
BuildDepends: <<
	fink-package-precedence,
	libgettext8-dev,
	libiconv-dev
<<
PatchFile: %n.patch
PatchFile-MD5: 0b3e00aa4bbaf63cf58bdb0ddcb30a8c
ConfigureParams: <<
	--mandir=%p/share/man \
	--infodir=%p/share/info \
	--disable-static \
	--enable-dependency-tracking
<<
CompileScript: <<
	%{default_script}
	fink-package-precedence --prohibit-bdep %N-dev .
<<
InfoTest: <<
	TestScript: <<
		make check || exit 2
		fink-package-precedence --prohibit-bdep %N-dev .
	<<
<<
InstallScript: <<
	make install DESTDIR=%d AM_UPDATE_INFO_DIR=no
<<
SplitOff: <<
	Package: %N-shlibs
	Replaces: %N (<= 3.6-5)
	Depends: <<
		libgettext8-shlibs,
		libiconv
	<<
	Files: lib/librecode.*.dylib
	Shlibs: %p/lib/librecode.0.dylib 1.0.0 %n (>= 3.6-6)
	DocFiles: README COPYING COPYING-LIB AUTHORS NEWS THANKS
<<
SplitOff2: <<
	Package: %N-dev
	BuildDependsOnly: True
	Depends: %N-shlibs (= %v-%r)
	Replaces: %N (<= 3.6-5)
	Files: <<
		include
		lib
	<<
	DocFiles: README COPYING COPYING-LIB AUTHORS NEWS THANKS
<<
DocFiles: README COPYING COPYING-LIB AUTHORS NEWS THANKS
#
PostInstScript: <<
if [ -L %p/etc/alternatives/charset.alias ]; then
	update-alternatives --remove charset.alias %p/lib/charset.alias.recode
fi
<<
InfoDocs: recode.info
#
DescPort: <<
* Prevent collisions with php functions.
https://sources.debian.org/patches/recode/3.6-23/04-src-hash-h-php4-collision.patch/
<<
Homepage: https://github.com/rrthomas/recode
