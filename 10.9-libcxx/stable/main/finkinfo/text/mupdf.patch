diff -Nurd -x'*~' mupdf-1.18.0-source.orig/Makerules mupdf-1.18.0-source/Makerules
--- mupdf-1.18.0-source.orig/Makerules	2020-10-07 06:35:03.000000000 -0400
+++ mupdf-1.18.0-source/Makerules	2020-12-22 15:58:22.000000000 -0500
@@ -110,13 +110,11 @@
   HAVE_GLUT := yes
   SYS_GLUT_CFLAGS := -Wno-deprecated-declarations
   SYS_GLUT_LIBS := -framework GLUT -framework OpenGL
-  CC = xcrun cc
+  CC = flag-sort cc
   AR = xcrun ar
   LD = xcrun ld
   RANLIB = xcrun ranlib
 
-else ifeq ($(OS),Linux)
-  HAVE_OBJCOPY := yes
 
   ifeq ($(shell pkg-config --exists freetype2 && echo yes),yes)
 	SYS_FREETYPE_CFLAGS := $(shell pkg-config --cflags freetype2)
@@ -165,11 +163,6 @@
 	SYS_CURL_LIBS := $(shell pkg-config --libs libcurl)
   endif
 
-  HAVE_GLUT := yes
-  ifeq ($(HAVE_GLUT),yes)
-	SYS_GLUT_CFLAGS :=
-	SYS_GLUT_LIBS := -lglut -lGL
-  endif
 
   HAVE_X11 := $(shell pkg-config --exists x11 xext && echo yes)
   ifeq ($(HAVE_X11),yes)
diff -Nurd -x'*~' mupdf-1.18.0-source.orig/Makethird mupdf-1.18.0-source/Makethird
--- mupdf-1.18.0-source.orig/Makethird	2020-10-07 06:35:03.000000000 -0400
+++ mupdf-1.18.0-source/Makethird	2020-12-22 15:59:06.000000000 -0500
@@ -8,7 +8,7 @@
   USE_SYSTEM_JPEGXR := no # not available
   USE_SYSTEM_LCMS2 := no # lcms2mt is strongly preferred
   USE_SYSTEM_LIBJPEG := yes
-  USE_SYSTEM_MUJS := no # not available
+  USE_SYSTEM_MUJS := yes
   USE_SYSTEM_OPENJPEG := yes
   USE_SYSTEM_ZLIB := yes
   USE_SYSTEM_GLUT := yes
Binary files mupdf-1.18.0-source.orig/thirdparty/lcms2/Projects/mac/LittleCMS/._Info.plist and mupdf-1.18.0-source/thirdparty/lcms2/Projects/mac/LittleCMS/._Info.plist differ
Binary files mupdf-1.18.0-source.orig/thirdparty/lcms2/Projects/mac/LittleCMS/._LittleCMS.xcodeproj and mupdf-1.18.0-source/thirdparty/lcms2/Projects/mac/LittleCMS/._LittleCMS.xcodeproj differ
